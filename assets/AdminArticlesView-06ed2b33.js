import{d as f,l as v,m as E,o as c,c as d,b as t,F as u,n as T,i as L,e as p,g as o,h as k,q as w,A as C,a as V,x}from"./index-d4ef98da.js";import{_ as y}from"./PaginationComponent.vue_vue_type_style_index_0_lang-e0f8b313.js";const P={class:"container"},A={class:"text-end mt-4"},I={class:"table mt-4"},N=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),$={key:0},R={class:"text-end"},U={class:"text-end"},B={class:"btn-group"},D=["onClick"],S=["onClick"],M={class:"d-flex justify-content-center"},O={class:"text-center"},j=f({__name:"AdminArticlesView",setup(F){const{VITE_URL:g,VITE_PATH:m,VITE_TEXT:h}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},e=v({products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}),_=async(i=e.pagination.current_page||1)=>{var l;const s=`${g}/api/${m}/admin/products/?page=${i}`;e.isLoading=!0;try{const a=await w.get(s);e.isLoading=!1,e.products=a.data.products,e.pagination=a.data.pagination}catch(a){e.isLoading=!1,a instanceof C&&alert((l=a.response)==null?void 0:l.data.message)}};E(()=>{_()});const r=(i,s={})=>{switch(i){case"new":e.tempProduct={imagesUrl:[]},e.isNew=!0;break;case"edit":e.tempProduct={...s},e.isNew=!1;break;case"delete":e.tempProduct={...s};break}};return(i,s)=>{var a;const l=V("Loading");return c(),d(u,null,[t("div",P,[t("div",A,[t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=n=>r("new"))},"建立新的產品")]),t("table",I,[N,(a=e.products)!=null&&a.length?(c(),d("tbody",$,[(c(!0),d(u,null,T(e.products,n=>(c(),d("tr",{key:n.id},[t("td",null,o(n.category),1),t("td",null,o(n.title),1),t("td",R,o(n.origin_price),1),t("td",U,o(n.price),1),t("td",null,[t("span",{class:x({"text-success":n.is_enabled})},o(n.is_enabled?"啟用":"未啟用"),3)]),t("td",null,[t("div",B,[t("button",{class:"btn btn-outline-primary btn-sm",onClick:b=>r("edit",n)}," 編輯 ",8,D),t("button",{class:"btn btn-outline-danger btn-sm",onClick:b=>r("delete",n)}," 刪除 ",8,S)])])]))),128))])):L("",!0)]),t("div",M,[p(y,{ref:"paginationComponentRef",pagination:e.pagination,onChangePage:_},null,8,["pagination"])]),t("div",O,[t("p",null,o(k(h)),1)])]),p(l,{active:e.isLoading,"onUpdate:active":s[1]||(s[1]=n=>e.isLoading=n),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{j as default};
