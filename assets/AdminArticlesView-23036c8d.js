import{d as f,h as v,o as E,a as c,c as d,g as t,F as _,z as T,e as k,k as p,t as o,u as C,P as L,Q as w,j as V,A as x}from"./index-88335d6f.js";import{P}from"./PaginationComponent-639629ed.js";const y={class:"container"},A={class:"text-end mt-4"},I={class:"table mt-4"},N=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用"),t("th",{width:"120"},"編輯")])],-1),R={key:0},$={class:"text-end"},U={class:"text-end"},B={class:"btn-group"},D=["onClick"],S=["onClick"],M={class:"d-flex justify-content-center"},O={class:"text-center"},H=f({__name:"AdminArticlesView",setup(j){const{VITE_URL:g,VITE_PATH:m,VITE_TEXT:h}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},e=v({products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1}),u=async(i=e.pagination.current_page||1)=>{var l;const s=`${g}/api/${m}/admin/products/?page=${i}`;e.isLoading=!0;try{const a=await L.get(s);e.isLoading=!1,e.products=a.data.products,e.pagination=a.data.pagination}catch(a){e.isLoading=!1,a instanceof w&&alert((l=a.response)==null?void 0:l.data.message)}};E(()=>{u()});const r=(i,s={})=>{switch(i){case"new":e.tempProduct={imagesUrl:[]},e.isNew=!0;break;case"edit":e.tempProduct={...s},e.isNew=!1;break;case"delete":e.tempProduct={...s};break}};return(i,s)=>{var a;const l=V("Loading");return c(),d(_,null,[t("div",y,[t("div",A,[t("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=n=>r("new"))},"建立新的產品")]),t("table",I,[N,(a=e.products)!=null&&a.length?(c(),d("tbody",R,[(c(!0),d(_,null,T(e.products,n=>(c(),d("tr",{key:n.id},[t("td",null,o(n.category),1),t("td",null,o(n.title),1),t("td",$,o(n.origin_price),1),t("td",U,o(n.price),1),t("td",null,[t("span",{class:x({"text-success":n.is_enabled})},o(n.is_enabled?"啟用":"未啟用"),3)]),t("td",null,[t("div",B,[t("button",{class:"btn btn-outline-primary btn-sm",onClick:b=>r("edit",n)}," 編輯 ",8,D),t("button",{class:"btn btn-outline-danger btn-sm",onClick:b=>r("delete",n)}," 刪除 ",8,S)])])]))),128))])):k("",!0)]),t("div",M,[p(P,{ref:"paginationComponentRef",pagination:e.pagination,onChangePage:u},null,8,["pagination"])]),t("div",O,[t("p",null,o(C(h)),1)])]),p(l,{active:e.isLoading,"onUpdate:active":s[1]||(s[1]=n=>e.isLoading=n),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{H as default};
