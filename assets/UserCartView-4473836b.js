import{d as N,s as v,a as o,c as n,g as t,D as k,u as e,F as x,y as q,e as f,t as a,k as C,n as B,i as D,j as R,b as T,v as $,x as F}from"./index-e90a5241.js";import{u as M}from"./cartStore-d55ecd43.js";import{u as j}from"./loadingStore-7ef296c5.js";import{U as z}from"./UserMayLike-c3c90564.js";import"./useMoney-a503043a.js";const A={class:"container"},E={class:"mt-4"},I={class:"text-end"},G={key:0,class:"p-2"},H=t("p",{class:"h1 text-primary font-weight-bold mb-5"},"購物車是空的喔！",-1),J=[H],K={key:1,class:"table align-middle"},O=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價"),t("th")])],-1),P=["disabled","onClick"],Q=t("div",null,"移除購物車",-1),W=[Q],X={key:0,class:"text-success"},Y={class:"input-group input-group-sm"},Z={class:"input-group mb-3"},tt=["onUpdate:modelValue","disabled","onChange"],st={id:"basic-addon2",class:"input-group-text"},et={class:"text-end"},ot={key:0,class:"text-success"},nt={key:1},lt={key:0},at=t("td",null,null,-1),dt=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),ct={class:"text-end text-success"},it={key:1},rt=t("td",null,null,-1),ut=t("td",{colspan:"3",class:"text-end"},"總計",-1),_t={class:"text-end"},pt={class:"text-end my-4"},xt=N({__name:"UserCartView",setup(ht){const V=D(),L=j(),{isLoading:c}=v(L),r=M(),{updateCart:S,deleteAllCarts:u,deleteCartItem:U}=r,{carts:l}=v(r);return(bt,d)=>{var _,p,h,b,y;const w=R("Loading");return o(),n(x,null,[t("div",A,[t("div",E,[t("div",I,[t("button",{class:"btn btn-outline-danger",type:"button",style:k({display:((_=e(l).carts)==null?void 0:_.length)===0?"none":"inline-block"}),onClick:d[0]||(d[0]=(...s)=>e(u)&&e(u)(...s))}," 清空購物車 ",4)]),(h=(p=e(l))==null?void 0:p.carts)!=null&&h.length?(o(),n("table",K,[O,t("tbody",null,[(b=e(l))!=null&&b.carts?(o(!0),n(x,{key:0},q(e(l).carts,s=>{var g,m;return o(),n("tr",{key:s.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:e(c),onClick:i=>e(U)(s.id)},W,8,P)]),t("td",null,[T(a(s.product.title)+" ",1),s.product.price<s.product.origin_price?(o(),n("div",X," 已套用優惠券 ")):f("",!0)]),t("td",null,[t("div",Y,[t("div",Z,[$(t("input",{"onUpdate:modelValue":i=>s.qty=i,"aria-label":"qty-input",min:"1",type:"number",class:"form-control",disabled:e(c),onChange:i=>e(S)(s)},null,40,tt),[[F,s.qty,void 0,{number:!0}]]),t("span",st,a(s.product.unit),1)])])]),t("td",null,[t("p",null,a(((g=s.product)==null?void 0:g.price)||((m=s.product)==null?void 0:m.origin_price)),1)]),t("td",et,[s.product.price<s.product.origin_price?(o(),n("small",ot,"折扣價："+a(s.final_total),1)):(o(),n("small",nt,a(s.total),1))])])}),128)):f("",!0)]),t("tfoot",null,[e(l).final_total<e(l).total?(o(),n("tr",lt,[at,dt,t("td",ct,a(e(l).final_total),1)])):(o(),n("tr",it,[rt,ut,t("td",_t,a(e(l).total),1)]))])])):(o(),n("div",G,J)),t("div",pt,[t("button",{class:"btn btn-success",type:"button",style:k({display:((y=e(l).carts)==null?void 0:y.length)===0?"none":"inline-block"}),onClick:d[1]||(d[1]=s=>e(V).push("/order"))}," 付款結帳 ",4)]),C(z)])]),C(w,{active:e(c),"onUpdate:active":d[2]||(d[2]=s=>B(c)?c.value=s:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{xt as default};
