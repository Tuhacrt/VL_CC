import{d as I,r as g,s as h,a as R,c as k,g as e,k as t,l as C,u as m,n as L,F as O,i as F,O as q,P as A,j as _,z as p,S as B,p as P,f as D,_ as M}from"./index-e90a5241.js";import{u as N}from"./cartStore-d55ecd43.js";import{u as j}from"./loadingStore-7ef296c5.js";const d=c=>(P("data-v-230d7f43"),c=c(),D(),c),z={class:"container"},H={class:"my-5 row justify-content-center"},$=d(()=>e("h5",{class:"text-center"},"填寫訂購表單",-1)),K=d(()=>e("div",{class:"my-5 w-75"},[e("div",{class:"position-relative m-4"},[e("div",{class:"progress"},[e("div",{class:"progress-bar w-50",role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),e("button",{type:"button",class:"progress-bar-button position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill text-white"}," 商品確認 "),e("button",{type:"button",class:"progress-bar-button position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill text-white"}," 表單填寫 "),e("button",{type:"button",class:"progress-bar-button position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill"}," 訂購完成 ")])],-1)),X={class:"mb-3"},G=d(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),J={class:"mb-3"},Q=d(()=>e("label",{for:"name",class:"form-label"},"收件人姓名",-1)),W={class:"mb-3"},Y=d(()=>e("label",{for:"tel",class:"form-label"},"收件人電話",-1)),Z={class:"mb-3"},ee=d(()=>e("label",{for:"address",class:"form-label"},"收件人地址",-1)),se={class:"mb-3"},ae=d(()=>e("label",{for:"message",class:"form-label"},"留言",-1)),te={class:"text-end"},le=["disabled"],oe=I({__name:"UserOrderView",setup(c){const{VITE_URL:y,VITE_PATH:E}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},b=g(),x=F(),w=j(),{isLoading:r}=h(w),v=N(),{getCart:T}=v,{carts:S}=h(v),a=g({user:{},message:""}),U=async()=>{var o,n;const f=`${y}/api/${E}/order`,s=a.value;r.value=!0;try{const i=await q.post(f,{data:s});r.value=!1,(o=b.value)==null||o.resetForm(),alert(i.data.message),T(),x.push("/")}catch(i){r.value=!1,i instanceof A&&alert((n=i.response)==null?void 0:n.data.message)}};return(f,s)=>{const o=_("Field"),n=_("ErrorMessage"),i=_("Loading");return R(),k(O,null,[e("div",z,[e("div",H,[$,K,t(m(B),{ref_key:"formRef",ref:b,class:"col-md-6",onSubmit:U},{default:C(({errors:u})=>{var V;return[e("div",X,[G,t(o,{id:"email",modelValue:a.value.user.email,"onUpdate:modelValue":s[0]||(s[0]=l=>a.value.user.email=l),name:"email",label:"Email",type:"email",class:p(["form-control",{"is-invalid":u.email}]),placeholder:"請輸入 Email",rules:"required|email"},null,8,["modelValue","class"]),t(n,{name:"email",class:"invalid-feedback"})]),e("div",J,[Q,t(o,{id:"name",modelValue:a.value.user.name,"onUpdate:modelValue":s[1]||(s[1]=l=>a.value.user.name=l),name:"name",label:"姓名",type:"text",class:p(["form-control",{"is-invalid":u.name}]),placeholder:"請輸入姓名",rules:"required"},null,8,["modelValue","class"]),t(n,{name:"name",class:"invalid-feedback"})]),e("div",W,[Y,t(o,{id:"tel",modelValue:a.value.user.tel,"onUpdate:modelValue":s[2]||(s[2]=l=>a.value.user.tel=l),name:"tel",label:"電話",type:"tel",class:p(["form-control",{"is-invalid":u.tel}]),placeholder:"請輸入電話",rules:"required|min:8|max:10"},null,8,["modelValue","class"]),t(n,{name:"tel",class:"invalid-feedback"})]),e("div",Z,[ee,t(o,{id:"address",modelValue:a.value.user.address,"onUpdate:modelValue":s[3]||(s[3]=l=>a.value.user.address=l),name:"address",label:"地址",type:"text",class:p(["form-control",{"is-invalid":u.address}]),placeholder:"請輸入地址",rules:"required"},null,8,["modelValue","class"]),t(n,{name:"address",class:"invalid-feedback"})]),e("div",se,[ae,t(o,{id:"message",modelValue:a.value.message,"onUpdate:modelValue":s[4]||(s[4]=l=>a.value.message=l),name:"message",as:"textarea",class:"form-control",cols:"30",rows:"10"},null,8,["modelValue"])]),e("div",te,[e("button",{type:"submit",class:"btn btn-success",disabled:!((V=m(S))!=null&&V.total)||m(r)}," 送出訂單 ",8,le)])]}),_:1},512)])]),t(i,{active:m(r),"onUpdate:active":s[5]||(s[5]=u=>L(r)?r.value=u:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});const ie=M(oe,[["__scopeId","data-v-230d7f43"]]);export{ie as default};
