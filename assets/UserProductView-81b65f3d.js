import{d as E,k as T,l as b,o as l,c as u,a as s,g as i,h as L,i as V,v as k,u as g,j as U,b as C,F as R,s as x,p as m,A as v,r as I}from"./index-f073120f.js";const w={class:"container"},A={class:"about"},D={class:"modal-body"},P={class:"row"},$={class:"col-sm-6"},B=["src"],N={class:"col-sm-6"},S={class:"badge bg-primary rounded-pill"},q={key:0,class:"h5"},M={key:1},O={class:"h6"},F={class:"h5"},H={class:"input-group"},X=E({__name:"UserProductView",setup(j){const{VITE_URL:p,VITE_PATH:_}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=x(),t=T({product:{},isLoading:!1});let n=1;const f=async()=>{var r;const{id:d}=h.params,o=`${p}/api/${_}/product/${d}`;t.isLoading=!0;try{const a=await m.get(o);t.isLoading=!1,t.product=a.data.product}catch(a){a instanceof v&&alert((r=a.response)==null?void 0:r.data.message)}},y=async(d,o=1)=>{var c;const r=`${p}/api/${_}/cart`,a={product_id:d,qty:o};t.isLoading=!0;try{const e=await m.post(r,{data:a});t.isLoading=!1,n=1,alert(e.data.message)}catch(e){e instanceof v&&alert((c=e.response)==null?void 0:c.data.message)}};return b(()=>{f()}),(d,o)=>{var a,c;const r=I("Loading");return l(),u(R,null,[s("div",w,[s("div",A,[s("h1",null,i(t.product.title),1),s("div",D,[s("div",P,[s("div",$,[(a=t.product)!=null&&a.imagesUrl?(l(),u("img",{key:0,class:"img-fluid",src:(c=t.product)==null?void 0:c.imagesUrl[0],alt:""},null,8,B)):L("",!0)]),s("div",N,[s("span",S,i(t.product.category),1),s("p",null,"商品描述："+i(t.product.description),1),s("p",null,"商品內容："+i(t.product.content),1),t.product.price<t.product.origin_price?(l(),u("div",q,i(t.product.origin_price)+" 元 ",1)):(l(),u("div",M,[s("del",O,"原價 "+i(t.product.origin_price)+" 元",1),s("div",F,"現在只要 "+i(t.product.price)+" 元",1)])),s("div",null,[s("div",H,[V(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>U(n)?n.value=e:n=e),"aria-label":"quantity-input",min:"1",type:"number",class:"form-control"},null,512),[[k,g(n),void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=e=>y(t.product.id,g(n)))}," 加入購物車 ")])])])])])])]),C(r,{active:t.isLoading,"onUpdate:active":o[2]||(o[2]=e=>t.isLoading=e),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{X as default};
