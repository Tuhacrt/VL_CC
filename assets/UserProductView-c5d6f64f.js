import{d as E,a as T,o as b,c as l,e as u,f as s,l as i,n as L,q as V,v as U,m,s as k,g as C,F as R,B as x,y as g,A as v,b as I}from"./index-fbf737bb.js";const w={class:"container"},A={class:"about"},B={class:"modal-body"},D={class:"row"},P={class:"col-sm-6"},$=["src"],q={class:"col-sm-6"},N={class:"badge bg-primary rounded-pill"},S={key:0,class:"h5"},M={key:1},O={class:"h6"},F={class:"h5"},H={class:"input-group"},j=E({__name:"UserProductView",setup(K){const{VITE_URL:p,VITE_PATH:_}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},f=x(),t=T({product:{},isLoading:!1});let n=1;const h=async()=>{var r;const{id:d}=f.params,o=`${p}/api/${_}/product/${d}`;t.isLoading=!0;try{const a=await g.get(o);t.isLoading=!1,t.product=a.data.product}catch(a){a instanceof v&&alert((r=a.response)==null?void 0:r.data.message)}},y=async(d,o=1)=>{var c;const r=`${p}/api/${_}/cart`,a={product_id:d,qty:o};t.isLoading=!0;try{const e=await g.post(r,{data:a});t.isLoading=!1,n=1,alert(e.data.message)}catch(e){e instanceof v&&alert((c=e.response)==null?void 0:c.data.message)}};return b(()=>{h()}),(d,o)=>{var a,c;const r=I("Loading");return l(),u(R,null,[s("div",w,[s("div",A,[s("h1",null,i(t.product.title),1),s("div",B,[s("div",D,[s("div",P,[(a=t.product)!=null&&a.imagesUrl?(l(),u("img",{key:0,class:"img-fluid",src:(c=t.product)==null?void 0:c.imagesUrl[0],alt:""},null,8,$)):L("",!0)]),s("div",q,[s("span",N,i(t.product.category),1),s("p",null,"商品描述："+i(t.product.description),1),s("p",null,"商品內容："+i(t.product.content),1),t.product.price<t.product.origin_price?(l(),u("div",S,i(t.product.origin_price)+" 元 ",1)):(l(),u("div",M,[s("del",O,"原價 "+i(t.product.origin_price)+" 元",1),s("div",F,"現在只要 "+i(t.product.price)+" 元",1)])),s("div",null,[s("div",H,[V(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k(n)?n.value=e:n=e),"aria-label":"quantity-input",min:"1",type:"number",class:"form-control"},null,512),[[U,m(n),void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=e=>y(t.product.id,m(n)))}," 加入購物車 ")])])])])])])]),C(r,{active:t.isLoading,"onUpdate:active":o[2]||(o[2]=e=>t.isLoading=e),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{j as default};
