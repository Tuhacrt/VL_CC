import{b as E,g as T,h as b,o as l,c as u,f as s,n as i,s as L,v as V,x as U,q as g,y as k,j as x,F as C,D as R,a as m,A as v,i as D}from"./index-2c81f593.js";const I={class:"container"},w={class:"about"},A={class:"modal-body"},P={class:"row"},$={class:"col-sm-6"},q=["src"],B={class:"col-sm-6"},N={class:"badge bg-primary rounded-pill"},S={key:0,class:"h5"},M={key:1},O={class:"h6"},F={class:"h5"},H={class:"input-group"},X=E({__name:"UserProductView",setup(j){const{VITE_URL:p,VITE_PATH:_}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=R(),t=T({product:{},isLoading:!1});let n=1;const f=async()=>{var r;const{id:d}=h.params,o=`${p}/api/${_}/product/${d}`;t.isLoading=!0;try{const a=await m.get(o);t.isLoading=!1,t.product=a.data.product}catch(a){a instanceof v&&alert((r=a.response)==null?void 0:r.data.message)}},y=async(d,o=1)=>{var c;const r=`${p}/api/${_}/cart`,a={product_id:d,qty:o};t.isLoading=!0;try{const e=await m.post(r,{data:a});t.isLoading=!1,n=1,alert(e.data.message)}catch(e){e instanceof v&&alert((c=e.response)==null?void 0:c.data.message)}};return b(()=>{f()}),(d,o)=>{var a,c;const r=D("Loading");return l(),u(C,null,[s("div",I,[s("div",w,[s("h1",null,i(t.product.title),1),s("div",A,[s("div",P,[s("div",$,[(a=t.product)!=null&&a.imagesUrl?(l(),u("img",{key:0,class:"img-fluid",src:(c=t.product)==null?void 0:c.imagesUrl[0],alt:""},null,8,q)):L("",!0)]),s("div",B,[s("span",N,i(t.product.category),1),s("p",null,"商品描述："+i(t.product.description),1),s("p",null,"商品內容："+i(t.product.content),1),t.product.price<t.product.origin_price?(l(),u("div",S,i(t.product.origin_price)+" 元 ",1)):(l(),u("div",M,[s("del",O,"原價 "+i(t.product.origin_price)+" 元",1),s("div",F,"現在只要 "+i(t.product.price)+" 元",1)])),s("div",null,[s("div",H,[V(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>k(n)?n.value=e:n=e),"aria-label":"quantity-input",min:"1",type:"number",class:"form-control"},null,512),[[U,g(n),void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=e=>y(t.product.id,g(n)))}," 加入購物車 ")])])])])])])]),x(r,{active:t.isLoading,"onUpdate:active":o[2]||(o[2]=e=>t.isLoading=e),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{X as default};
