import{d as L,q as I,r as T,a as n,c as a,g as t,t as d,u as e,e as w,v as j,x as D,n as R,s as P,k as b,F as k,y as S,j as F,z as N,A as M,p as B,f as q,_ as z}from"./index-30dfd135.js";import{u as A}from"./useModal-ef71b2ec.js";import{U as E}from"./UserIndexIntro-ffc8effb.js";import{_ as Q}from"./PaginationComponent.vue_vue_type_style_index_0_lang-69e541f2.js";import{u as G}from"./cartStore-7c01e99f.js";import{u as H}from"./productStore-33e5f2e7.js";import{u as J}from"./loadingStore-5d94c5d2.js";import{n as K}from"./useMoney-b6923fab.js";const O={class:"modal-dialog modal-xl",role:"document"},W={class:"modal-content border-0"},X={class:"modal-header bg-dark text-white"},Y={id:"findMoreModalLabel",class:"modal-title text-white"},Z={class:"modal-body"},tt={class:"row"},et={class:"col-sm-6"},st=["src"],ot={class:"col-sm-6"},it={class:"badge bg-primary rounded-pill"},nt={key:0,class:"h5"},at={key:1},dt={class:"h6"},rt={class:"h5"},lt={class:"input-group"},ct=L({__name:"UserFindMoreModal",props:{tempProduct:null,addToCart:{type:Function}},setup(l,{expose:m}){const o=I(l,"tempProduct"),u=T(""),{showModal:g,hideModal:_}=A(u);let i=1;const p=()=>{i=1};return m({showModal:g,hideModal:_}),(y,r)=>{var h;return n(),a("div",{id:"findMoreModal",ref_key:"findMoreModalRef",ref:u,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"findMoreModalLabel","aria-hidden":"true"},[t("div",O,[t("div",W,[t("div",X,[t("h5",Y,[t("span",null,d(e(o).title),1)]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:r[0]||(r[0]=(...c)=>e(_)&&e(_)(...c))})]),t("div",Z,[t("div",tt,[t("div",et,[e(o).imagesUrl?(n(),a("img",{key:0,class:"img-fluid",src:(h=e(o))==null?void 0:h.imagesUrl[0],alt:""},null,8,st)):w("",!0)]),t("div",ot,[t("span",it,d(e(o).category),1),t("p",null,"商品描述："+d(e(o).description),1),t("p",null,"商品內容："+d(e(o).content),1),e(o).price<e(o).origin_price?(n(),a("div",nt,d(e(o).origin_price)+" 元 ",1)):(n(),a("div",at,[t("del",dt,"原價 "+d(e(o).origin_price)+" 元",1),t("div",rt,"現在只要 "+d(e(o).price)+" 元",1)])),t("div",null,[t("div",lt,[j(t("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>R(i)?i.value=c:i=c),min:"1",type:"number",class:"form-control"},null,512),[[D,e(i),void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary text-white",onClick:r[2]||(r[2]=c=>(l.addToCart(e(o).id,e(i)),p(),e(_)()))}," 加入購物車 ")])])])])])])])],512)}}}),_t=l=>(B("data-v-18e90477"),l=l(),q(),l),ut={class:"container"},mt={class:"row mt-5"},pt={class:"category-list col-md-3 mb-4"},ht={class:"card border-0"},ft=_t(()=>t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0"},[t("div",{class:"d-flex justify-content-center align-items-center pe-1"},[t("h4",{class:"mb-0"},"產品類別")])],-1)),vt={class:"card-body py-0"},bt={key:0,class:"sidebar-categories list-unstyled"},gt=["onClick"],yt={class:"col-md-8"},kt={key:0,class:"product-list row"},Mt={class:"card rounded-0 mb-4"},wt={class:"card-body text-start rounded-0 p-2"},xt={class:"card-img-wrapper position-relative mb-2"},$t=["onClick"],Ct=["src","alt"],Ut={class:"card-text row"},Pt={class:"card-title col-12"},St={class:"col-12 d-flex justify-content-between"},Lt={class:"card-text fs-6 pt-1 mb-0"},Tt=["disabled","onClick"],Rt={class:"d-flex justify-content-center"},Vt=L({__name:"UserProductsView",setup(l){const m=T(),x=J(),{isLoading:o}=P(x),u=H(),{getProductList:g,gotToProduct:_}=u,{products:i,tempProduct:p,categories:y}=P(u),r=G(),{addToCart:h}=r,c=()=>{window.scrollTo({top:300,behavior:"smooth"})},V=($,f)=>{var v;switch($){case"findMore":p.value={...f},(v=m.value)==null||v.showModal();break}};return($,f)=>{var C;const v=F("Loading");return n(),a(k,null,[b(E),t("div",ut,[t("div",mt,[t("div",pt,[t("div",ht,[ft,t("div",vt,[(C=e(y))!=null&&C.length?(n(),a("ul",bt,[(n(!0),a(k,null,S(e(y),s=>(n(),a("li",{key:s,class:"categories-item"},[t("a",{href:"#",class:N(["py-2 d-block text-muted",{active:s==="所有產品"?e(i).pagination.category==="":s===e(i).pagination.category}]),onClick:M(U=>{e(g)(1,`${s}`),c()},["prevent"])},d(s),11,gt)]))),128))])):w("",!0)])])]),t("div",yt,[e(i).products.length?(n(),a("div",kt,[(n(!0),a(k,null,S(e(i).products,s=>(n(),a("div",{key:s.id,class:"col-md-6"},[t("div",Mt,[t("div",wt,[t("div",xt,[t("a",{href:"#",class:"stretched-link",onClick:M(U=>e(_)(s),["prevent"])},[t("img",{class:"card-img rounded-0",src:s==null?void 0:s.imagesUrl[0],alt:s.title},null,8,Ct)],8,$t)]),t("div",Ut,[t("h6",Pt,d(s.title),1),t("div",St,[t("p",Lt,d(e(K)(s==null?void 0:s.price)),1),t("button",{type:"button",class:"btn btn-find-more btn-sm btn-primary text-white",disabled:e(o),onClick:M(U=>V("findMore",s),["prevent"])}," 加入購物車 ",8,Tt)])])])])]))),128))])):w("",!0),t("div",Rt,[b(Q,{ref:"paginationComponentRef"},null,512)])])])]),b(ct,{ref_key:"findMoreModalRef",ref:m,"temp-product":e(p),"add-to-cart":e(h)},null,8,["temp-product","add-to-cart"]),b(v,{active:e(o),"onUpdate:active":f[0]||(f[0]=s=>R(o)?o.value=s:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});const At=z(Vt,[["__scopeId","data-v-18e90477"]]);export{At as default};
