import{d as T,q as D,r as k,a,c as n,g as e,t as i,u as t,e as $,v as F,x as N,n as V,s as S,o as B,C as q,k as y,F as C,y as L,j as z,z as A,A as x,p as E,f as Q,_ as W}from"./index-e90a5241.js";import{u as G}from"./useModal-4811a72b.js";import{U as H}from"./UserIndexIntro-3728a107.js";import{P as J}from"./PaginationComponent-acdad7ab.js";import{u as K}from"./cartStore-d55ecd43.js";import{u as X,n as Y}from"./useMoney-a503043a.js";import{u as Z}from"./loadingStore-7ef296c5.js";const ee={class:"modal-dialog modal-xl",role:"document"},te={class:"modal-content border-0"},se={class:"modal-header bg-dark text-white"},oe={id:"findMoreModalLabel",class:"modal-title text-white"},ae={class:"modal-body"},ne={class:"row"},ie={class:"col-sm-6"},de=["src"],le={class:"col-sm-6"},re={class:"badge bg-primary rounded-pill"},ce={key:0,class:"h5"},_e={key:1},pe={class:"h6"},ue={class:"h5"},me={class:"input-group"},he=T({__name:"UserFindMoreModal",props:{tempProduct:null,addToCart:{type:Function}},setup(r,{expose:b}){const o=D(r,"tempProduct"),f=k(""),{showModal:p,hideModal:c}=G(f);let d=1;const M=()=>{d=1};return b({showModal:p,hideModal:c}),(u,l)=>{var m;return a(),n("div",{id:"findMoreModal",ref_key:"findMoreModalRef",ref:f,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"findMoreModalLabel","aria-hidden":"true"},[e("div",ee,[e("div",te,[e("div",se,[e("h5",oe,[e("span",null,i(t(o).title),1)]),e("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:l[0]||(l[0]=(..._)=>t(c)&&t(c)(..._))})]),e("div",ae,[e("div",ne,[e("div",ie,[t(o).imagesUrl?(a(),n("img",{key:0,class:"img-fluid",src:(m=t(o))==null?void 0:m.imagesUrl[0],alt:""},null,8,de)):$("",!0)]),e("div",le,[e("span",re,i(t(o).category),1),e("p",null,"商品描述："+i(t(o).description),1),e("p",null,"商品內容："+i(t(o).content),1),t(o).price<t(o).origin_price?(a(),n("div",ce,i(t(o).origin_price)+" 元 ",1)):(a(),n("div",_e,[e("del",pe,"原價 "+i(t(o).origin_price)+" 元",1),e("div",ue,"現在只要 "+i(t(o).price)+" 元",1)])),e("div",null,[e("div",me,[F(e("input",{"onUpdate:modelValue":l[1]||(l[1]=_=>V(d)?d.value=_:d=_),min:"1",type:"number",class:"form-control"},null,512),[[N,t(d),void 0,{number:!0}]]),e("button",{type:"button",class:"btn btn-primary text-white",onClick:l[2]||(l[2]=_=>(r.addToCart(t(o).id,t(d)),M(),t(c)()))}," 加入購物車 ")])])])])])])])],512)}}}),be=r=>(E("data-v-b4e77359"),r=r(),Q(),r),fe={class:"container"},ve={class:"row mt-5"},ge={class:"category-list col-md-3 mb-4"},ye={id:"#cardOne",class:"card border-0"},ke=be(()=>e("div",{id:"headingOne",class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[e("div",{class:"d-flex justify-content-center align-items-center pe-1"},[e("h4",{class:"mb-0"},"產品類別")])],-1)),we={class:"card-body py-0"},Me={key:0,class:"sidebar-categories list-unstyled"},Ce=["onClick"],xe={class:"col-md-8"},$e={key:0,class:"product-list row"},Pe={class:"card rounded-0 mb-4"},Ue={class:"card-body text-start rounded-0 p-2"},Re={class:"card-img-wrapper position-relative mb-2"},Se=["onClick"],Le=["src","alt"],Te={class:"card-text row"},Ve={class:"card-title col-12"},Ie={class:"col-12 d-flex justify-content-between"},Oe={class:"card-text fs-6 pt-1 mb-0"},je=["disabled","onClick"],De={class:"d-flex justify-content-center"},Fe=T({__name:"UserProductsView",setup(r){const b=k(),w=k(""),o=k(null),f=Z(),{isLoading:p}=S(f),c=X(),{getProductList:d,gotToProduct:M}=c,{products:u,tempProduct:l,categories:m}=S(c),_=K(),{addToCart:I}=_;B(()=>{let h=!0;window.innerWidth<767&&(h=!1),o.value=new q(w.value,{toggle:h})});const O=()=>{window.scrollTo({top:300,behavior:"smooth"})},j=(h,v)=>{var g;switch(h){case"findMore":l.value={...v},(g=b.value)==null||g.showModal();break}};return(h,v)=>{var P,U;const g=z("Loading");return a(),n(C,null,[y(H),e("div",fe,[e("div",ve,[e("div",ge,[e("div",ye,[ke,e("div",{id:"collapseOne",ref_key:"collapseRef",ref:w,class:"collapse","aria-labelledby":"headingOne","data-bs-parent":"#cardOne"},[e("div",we,[(P=t(m))!=null&&P.length?(a(),n("ul",Me,[(a(!0),n(C,null,L(t(m),s=>(a(),n("li",{key:s,class:"categories-item"},[e("a",{href:"#",class:A(["py-2 d-block text-muted",{active:s==="所有產品"?t(u).pagination.category==="":s===t(u).pagination.category}]),onClick:x(R=>{t(d)(1,`${s}`),O()},["prevent"])},i(s),11,Ce)]))),128))])):$("",!0)])],512)])]),e("div",xe,[t(u).products.length?(a(),n("div",$e,[(a(!0),n(C,null,L(t(u).products,s=>(a(),n("div",{key:s.id,class:"col-md-6"},[e("div",Pe,[e("div",Ue,[e("div",Re,[e("a",{href:"#",class:"stretched-link",onClick:x(R=>t(M)(s),["prevent"])},[e("img",{class:"card-img rounded-0",src:s==null?void 0:s.imagesUrl[0],alt:s.title},null,8,Le)],8,Se)]),e("div",Te,[e("h6",Ve,i(s.title),1),e("div",Ie,[e("p",Oe,i(t(Y)(s==null?void 0:s.price)),1),e("button",{type:"button",class:"btn btn-find-more btn-sm btn-primary text-white",disabled:t(p),onClick:x(R=>j("findMore",s),["prevent"])}," 加入購物車 ",8,je)])])])])]))),128))])):$("",!0),e("div",De,[y(J,{ref:"paginationComponentRef",pagination:(U=t(u))==null?void 0:U.pagination,onChangePage:t(d)},null,8,["pagination","onChangePage"])])])])]),y(he,{ref_key:"findMoreModalRef",ref:b,"temp-product":t(l),"add-to-cart":t(I)},null,8,["temp-product","add-to-cart"]),y(g,{active:t(p),"onUpdate:active":v[0]||(v[0]=s=>V(p)?p.value=s:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});const We=W(Fe,[["__scopeId","data-v-b4e77359"]]);export{We as default};
