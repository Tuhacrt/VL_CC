import{d as S,q as V,r as U,a as n,c as i,g as t,t as a,u as e,e as y,v as F,x as z,n as T,s as L,F as R,y as B,k as v,j as D,z as N}from"./index-eb0e9c0c.js";import{u as j}from"./useModal-c0f7717f.js";import{_ as q}from"./PaginationComponent.vue_vue_type_style_index_0_lang-13ca1390.js";import{u as E}from"./cartStore-03278271.js";import{u as I}from"./productStore-3b25d40c.js";import{u as Q}from"./loadingStore-ee469167.js";const A={class:"modal-dialog modal-xl",role:"document"},G={class:"modal-content border-0"},H={class:"modal-header bg-dark text-white"},J={id:"findMoreModalLabel",class:"modal-title"},K={class:"modal-body"},O={class:"row"},W={class:"col-sm-6"},X=["src"],Y={class:"col-sm-6"},Z={class:"badge bg-primary rounded-pill"},tt={key:0,class:"h5"},et={key:1},ot={class:"h6"},st={class:"h5"},nt={class:"input-group"},it=S({__name:"UserFindMoreModal",props:{tempProduct:null,addToCart:{type:Function}},setup(g,{expose:_}){const o=V(g,"tempProduct"),u=U(""),{showModal:f,hideModal:c}=j(u);let l=1;const m=()=>{l=1};return _({showModal:f,hideModal:c}),(M,d)=>{var p;return n(),i("div",{id:"findMoreModal",ref_key:"findMoreModalRef",ref:u,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"findMoreModalLabel","aria-hidden":"true"},[t("div",A,[t("div",G,[t("div",H,[t("h5",J,[t("span",null,a(e(o).title),1)]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:d[0]||(d[0]=(...r)=>e(c)&&e(c)(...r))})]),t("div",K,[t("div",O,[t("div",W,[e(o).imagesUrl?(n(),i("img",{key:0,class:"img-fluid",src:(p=e(o))==null?void 0:p.imagesUrl[0],alt:""},null,8,X)):y("",!0)]),t("div",Y,[t("span",Z,a(e(o).category),1),t("p",null,"商品描述："+a(e(o).description),1),t("p",null,"商品內容："+a(e(o).content),1),e(o).price<e(o).origin_price?(n(),i("div",tt,a(e(o).origin_price)+" 元 ",1)):(n(),i("div",et,[t("del",ot,"原價 "+a(e(o).origin_price)+" 元",1),t("div",st,"現在只要 "+a(e(o).price)+" 元",1)])),t("div",null,[t("div",nt,[F(t("input",{"onUpdate:modelValue":d[1]||(d[1]=r=>T(l)?l.value=r:l=r),min:"1",type:"number",class:"form-control"},null,512),[[z,e(l),void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary",onClick:d[2]||(d[2]=r=>(g.addToCart(e(o).id,e(l)),m(),e(c)()))}," 加入購物車 ")])])])])])])])],512)}}}),at={class:"container"},lt={class:"mt-4"},dt={class:"table align-middle"},rt=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),ct={key:0},ut={style:{width:"200px"}},_t={key:0},mt={class:"h6"},pt={class:"h5"},ht={key:1,class:"h5"},bt={class:"btn-group btn-group-sm"},gt=["disabled","onClick"],ft=["disabled","onClick"],vt=["disabled","onClick"],yt={class:"d-flex justify-content-center"},Pt=S({__name:"UserProductsView",setup(g){const _=U(),k=Q(),{isLoading:o}=L(k),u=I(),{getProductList:f,gotToProduct:c}=u,{products:l,tempProduct:m}=L(u),M=E(),{addToCart:d}=M,p=(r,h)=>{var b;switch(r){case"findMore":m.value={...h},(b=_.value)==null||b.showModal();break}};return(r,h)=>{var $,C,x,w;const b=D("Loading");return n(),i(R,null,[t("div",at,[t("div",lt,[t("table",dt,[rt,(C=($=e(l))==null?void 0:$.products)!=null&&C.length?(n(),i("tbody",ct,[(n(!0),i(R,null,B((x=e(l))==null?void 0:x.products,s=>(n(),i("tr",{key:s.id},[t("td",ut,[s.imagesUrl?(n(),i("div",{key:0,style:N([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s==null?void 0:s.imagesUrl[0]})`}])},null,4)):y("",!0)]),t("td",null,a(s.title),1),t("td",null,[s.price<s.origin_price?(n(),i("div",_t,[t("del",mt,"原價 "+a(s.origin_price)+" 元",1),t("div",pt,a(s.price)+" 元",1)])):(n(),i("div",ht,a(s.origin_price)+" 元",1))]),t("td",null,[t("div",bt,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:e(o),onClick:P=>e(c)(s)}," 詳細頁面 ",8,gt),t("button",{type:"button",class:"btn btn-outline-secondary",disabled:e(o),onClick:P=>p("findMore",s)}," 查看描述 ",8,ft),t("button",{type:"button",class:"btn btn-outline-danger",disabled:e(o),onClick:P=>e(d)(s.id)}," 加到購物車 ",8,vt)])])]))),128))])):y("",!0)])]),t("div",yt,[v(q,{ref:"paginationComponentRef",pagination:(w=e(l))==null?void 0:w.pagination,onChangePage:e(f)},null,8,["pagination","onChangePage"])])]),v(it,{ref_key:"findMoreModalRef",ref:_,"temp-product":e(m),"add-to-cart":e(d)},null,8,["temp-product","add-to-cart"]),v(b,{active:e(o),"onUpdate:active":h[0]||(h[0]=s=>T(o)?o.value=s:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});export{Pt as default};
