import{d as T,q as j,r as R,a as i,c as n,g as t,t as d,u as e,e as w,v as D,x as F,n as V,s as S,k as g,F as k,y as L,j as N,z as B,A as M,p as q,f as z,_ as A}from"./index-cb6d3577.js";import{u as E}from"./useModal-6280d932.js";import{U as Q}from"./UserIndexIntro-71a31d88.js";import{_ as G}from"./PaginationComponent.vue_vue_type_style_index_0_lang-a8c5cb04.js";import{u as H}from"./cartStore-693fbbfa.js";import{u as J,n as K}from"./useMoney-3d143ec2.js";import{u as O}from"./loadingStore-e744f77d.js";const W={class:"modal-dialog modal-xl",role:"document"},X={class:"modal-content border-0"},Y={class:"modal-header bg-dark text-white"},Z={id:"findMoreModalLabel",class:"modal-title text-white"},tt={class:"modal-body"},et={class:"row"},st={class:"col-sm-6"},ot=["src"],at={class:"col-sm-6"},it={class:"badge bg-primary rounded-pill"},nt={key:0,class:"h5"},dt={key:1},rt={class:"h6"},lt={class:"h5"},ct={class:"input-group"},_t=T({__name:"UserFindMoreModal",props:{tempProduct:null,addToCart:{type:Function}},setup(l,{expose:p}){const o=j(l,"tempProduct"),u=R(""),{showModal:m,hideModal:_}=E(u);let a=1;const h=()=>{a=1};return p({showModal:m,hideModal:_}),(y,r)=>{var f;return i(),n("div",{id:"findMoreModal",ref_key:"findMoreModalRef",ref:u,class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"findMoreModalLabel","aria-hidden":"true"},[t("div",W,[t("div",X,[t("div",Y,[t("h5",Z,[t("span",null,d(e(o).title),1)]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close",onClick:r[0]||(r[0]=(...c)=>e(_)&&e(_)(...c))})]),t("div",tt,[t("div",et,[t("div",st,[e(o).imagesUrl?(i(),n("img",{key:0,class:"img-fluid",src:(f=e(o))==null?void 0:f.imagesUrl[0],alt:""},null,8,ot)):w("",!0)]),t("div",at,[t("span",it,d(e(o).category),1),t("p",null,"商品描述："+d(e(o).description),1),t("p",null,"商品內容："+d(e(o).content),1),e(o).price<e(o).origin_price?(i(),n("div",nt,d(e(o).origin_price)+" 元 ",1)):(i(),n("div",dt,[t("del",rt,"原價 "+d(e(o).origin_price)+" 元",1),t("div",lt,"現在只要 "+d(e(o).price)+" 元",1)])),t("div",null,[t("div",ct,[D(t("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>V(a)?a.value=c:a=c),min:"1",type:"number",class:"form-control"},null,512),[[F,e(a),void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary text-white",onClick:r[2]||(r[2]=c=>(l.addToCart(e(o).id,e(a)),h(),e(_)()))}," 加入購物車 ")])])])])])])])],512)}}}),ut=l=>(q("data-v-91bafeda"),l=l(),z(),l),pt={class:"container"},mt={class:"row mt-5"},ht={class:"category-list col-md-3 mb-4"},ft={class:"card border-0"},bt=ut(()=>t("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0"},[t("div",{class:"d-flex justify-content-center align-items-center pe-1"},[t("h4",{class:"mb-0"},"產品類別")])],-1)),vt={class:"card-body py-0"},gt={key:0,class:"sidebar-categories list-unstyled"},yt=["onClick"],kt={class:"col-md-8"},Mt={key:0,class:"product-list row"},wt={class:"card rounded-0 mb-4"},xt={class:"card-body text-start rounded-0 p-2"},Ct={class:"card-img-wrapper position-relative mb-2"},$t=["onClick"],Pt=["src","alt"],Ut={class:"card-text row"},St={class:"card-title col-12"},Lt={class:"col-12 d-flex justify-content-between"},Tt={class:"card-text fs-6 pt-1 mb-0"},Rt=["disabled","onClick"],Vt={class:"d-flex justify-content-center"},It=T({__name:"UserProductsView",setup(l){const p=R(),x=O(),{isLoading:o}=S(x),u=J(),{getProductList:m,gotToProduct:_}=u,{products:a,tempProduct:h,categories:y}=S(u),r=H(),{addToCart:f}=r,c=()=>{window.scrollTo({top:300,behavior:"smooth"})},I=(C,b)=>{var v;switch(C){case"findMore":h.value={...b},(v=p.value)==null||v.showModal();break}};return(C,b)=>{var $,P;const v=N("Loading");return i(),n(k,null,[g(Q),t("div",pt,[t("div",mt,[t("div",ht,[t("div",ft,[bt,t("div",vt,[($=e(y))!=null&&$.length?(i(),n("ul",gt,[(i(!0),n(k,null,L(e(y),s=>(i(),n("li",{key:s,class:"categories-item"},[t("a",{href:"#",class:B(["py-2 d-block text-muted",{active:s==="所有產品"?e(a).pagination.category==="":s===e(a).pagination.category}]),onClick:M(U=>{e(m)(1,`${s}`),c()},["prevent"])},d(s),11,yt)]))),128))])):w("",!0)])])]),t("div",kt,[e(a).products.length?(i(),n("div",Mt,[(i(!0),n(k,null,L(e(a).products,s=>(i(),n("div",{key:s.id,class:"col-md-6"},[t("div",wt,[t("div",xt,[t("div",Ct,[t("a",{href:"#",class:"stretched-link",onClick:M(U=>e(_)(s),["prevent"])},[t("img",{class:"card-img rounded-0",src:s==null?void 0:s.imagesUrl[0],alt:s.title},null,8,Pt)],8,$t)]),t("div",Ut,[t("h6",St,d(s.title),1),t("div",Lt,[t("p",Tt,d(e(K)(s==null?void 0:s.price)),1),t("button",{type:"button",class:"btn btn-find-more btn-sm btn-primary text-white",disabled:e(o),onClick:M(U=>I("findMore",s),["prevent"])}," 加入購物車 ",8,Rt)])])])])]))),128))])):w("",!0),t("div",Vt,[g(G,{ref:"paginationComponentRef",pagination:(P=e(a))==null?void 0:P.pagination,onChangePage:e(m)},null,8,["pagination","onChangePage"])])])])]),g(_t,{ref_key:"findMoreModalRef",ref:p,"temp-product":e(h),"add-to-cart":e(f)},null,8,["temp-product","add-to-cart"]),g(v,{active:e(o),"onUpdate:active":b[0]||(b[0]=s=>V(o)?o.value=s:null),"can-cancel":!0,"is-full-page":!0},null,8,["active"])],64)}}});const At=A(It,[["__scopeId","data-v-91bafeda"]]);export{At as default};
