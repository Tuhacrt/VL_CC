import{P as y,r as E,s as $,o as _,M as c,N as l}from"./index-30dfd135.js";import{u as h}from"./loadingStore-5d94c5d2.js";const{VITE_URL:i,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},I=y("cart",()=>{const p=E({carts:[],total:0,final_total:0}),f=h(),{isLoading:e}=$(f),n=async()=>{var s;const t=`${i}/api/${u}/cart`;e.value=!0;try{const a=await c.get(t);e.value=!1,p.value=a.data.data}catch(a){e.value=!1,a instanceof l&&alert((s=a.response)==null?void 0:s.data.message)}},g=async t=>{var r;const s=`${i}/api/${u}/cart/${t.id}`,a={product_id:t.id,qty:t.qty};e.value=!0;try{const o=await c.put(s,{data:a});alert(o.data.message),n()}catch(o){e.value=!1,o instanceof l&&alert((r=o.response)==null?void 0:r.data.message)}},m=async(t,s=1)=>{var o;const a=`${i}/api/${u}/cart`,r={product_id:t,qty:s};e.value=!0;try{const d=await c.post(a,{data:r});alert(d.data.message),n()}catch(d){e.value=!1,d instanceof l&&alert((o=d.response)==null?void 0:o.data.message)}},v=async()=>{var s;const t=`${i}/api/${u}/carts`;e.value=!0;try{const a=await c.delete(t);alert(a.data.message),n()}catch(a){e.value=!1,a instanceof l&&alert((s=a.response)==null?void 0:s.data.message)}},T=async t=>{var a;const s=`${i}/api/${u}/cart/${t}`;e.value=!0;try{const r=await c.delete(s);alert(r.data.message),n()}catch(r){e.value=!1,r instanceof l&&alert((a=r.response)==null?void 0:a.data.message)}};return _(()=>{n()}),{carts:p,getCart:n,updateCart:g,addToCart:m,deleteAllCarts:v,deleteCartItem:T}});export{I as u};
