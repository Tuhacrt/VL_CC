import{Q as S,r as u,s as V,o as _,M as i,N as l,V as L}from"./index-ab88b64b.js";import{u as A}from"./loadingStore-011b2871.js";const{VITE_URL:p,VITE_PATH:d}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},w=S("product",()=>{const r=u({products:[],pagination:{}}),g=u({imagesUrl:[]}),E=u({products:[],pagination:{}}),f=u(["所有產品","肖像攝影","藝術攝影","商業攝影","婚禮拍攝","日常拍攝","旅遊拍攝"]),$=A(),{isLoading:a}=V($),m=()=>{var e;const o=new Set;(e=r.value)==null||e.products.map(t=>o.add(t.category));for(const t of o)f.value.push(t)},h=async()=>{var e;const o=`${p}/api/${d}/products/all`;a.value=!0;try{const t=await i.get(o);a.value=!1,E.value=t.data,m()}catch(t){a.value=!1,t instanceof l&&alert((e=t.response)==null?void 0:e.data.message)}},v=async(o=(t=>(t=r.value)==null?void 0:t.pagination.current_page)()||1,e=(s=>(s=r.value)==null?void 0:s.pagination.category)()||"")=>{var y;let c=`${p}/api/${d}/products?page=${o}`;e!==""&&(c+=`&category=${e}`);try{const n=await i.get(c);a.value=!1,r.value=n.data}catch(n){a.value=!1,n instanceof l&&alert((y=n.response)==null?void 0:y.data.message)}},T=async o=>{var t;const e=`${p}/api/${d}/product/${o}`;a.value=!0;try{const s=await i.get(e);a.value=!1,g.value=s.data.product}catch(s){s instanceof l&&alert((t=s.response)==null?void 0:t.data.message)}},P=async o=>{var s;const{id:e}=o,t=`${p}/api/${d}/product/${e}`;T(e),a.value=!0;try{await i.get(t),a.value=!1,L.push(`/product/${e}`)}catch(c){a.value=!1,c instanceof l&&alert((s=c.response)==null?void 0:s.data.message)}};return _(()=>{h(),v()}),{products:r,tempProduct:g,categories:f,getProductList:v,getProduct:T,gotToProduct:P}});export{w as u};
