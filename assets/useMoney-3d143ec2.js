import{M as S,r as c,s as P,o as L,N as u,O as l,P as V}from"./index-cb6d3577.js";import{u as _}from"./loadingStore-e744f77d.js";const{VITE_URL:i,VITE_PATH:d}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"tuhacrt",VITE_TOKEN:"loginToken",VITE_TEXT:"Environment is in production build",BASE_URL:"/VL_CC/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},A=S("product",()=>{const n=c({products:[],pagination:{}}),p=c({imagesUrl:[]}),T=c({products:[],pagination:{}}),f=c(["所有產品","肖像攝影","藝術攝影","商業攝影","婚禮拍攝","日常拍攝","旅遊拍攝"]),m=new Set(f.value),$=_(),{isLoading:a}=P($),y=()=>{var e;const s=new Set;(e=n.value)==null||e.products.map(t=>s.add(t.category));for(const t of s)m.has(t)===!1&&f.value.push(t)},E=async()=>{var e;const s=`${i}/api/${d}/products/all`;a.value=!0;try{const t=await u.get(s);a.value=!1,T.value=t.data,y()}catch(t){a.value=!1,t instanceof l&&alert((e=t.response)==null?void 0:e.data.message)}},g=async(s=1,e="")=>{var o;let t=`${i}/api/${d}/products?page=${s}`;e!==""&&e!=="所有產品"&&(t+=`&category=${e}`),a.value=!0;try{const r=await u.get(t);a.value=!1,n.value=r.data}catch(r){a.value=!1,r instanceof l&&alert((o=r.response)==null?void 0:o.data.message)}},v=async s=>{var t;const e=`${i}/api/${d}/product/${s}`;a.value=!0;try{const o=await u.get(e);a.value=!1,p.value=o.data.product}catch(o){o instanceof l&&alert((t=o.response)==null?void 0:t.data.message)}},h=async s=>{var o;const{id:e}=s,t=`${i}/api/${d}/product/${e}`;v(e),a.value=!0;try{await u.get(t),a.value=!1,V.push(`/product/${e}`)}catch(r){a.value=!1,r instanceof l&&alert((o=r.response)==null?void 0:o.data.message)}};return L(()=>{E(),g()}),{products:n,tempProduct:p,categories:f,getProductList:g,getProduct:v,gotToProduct:h}}),R=n=>`NT$ ${new Intl.NumberFormat().format(n)}`;export{R as n,A as u};
